# 4、计算机网络

### 4.1 开放互联参考模型

1. 七层机构由低到高
2. 物理层：二进制传输
3. 数据链路层：传输帧为单位的信息，头尾由mac地址
4. 网络层：数据分组。p地址、端口等信息
5. 传输层：端到端的链接
6. 会话层：建立、管理、终止会话
7. 表示层：主要负责格式表达压缩、加密等数据格式相关操作
8. 应用层：具体的应用功能比如播放视频



各层对应的东西

物：中继器、集线器（多口中继器）。在同一冲突与域，集线器一个端口为一个冲突域

数：网桥、交换机、网卡。同一网络内、局域网，一个广播域

网络层：三层交换机、路由器。一个端口一个广播域，也可以对应一个冲突域

传输层：tcp、udp

会、表、应：ftp、http、dns等



防火墙有网络层的也有应用层的



### 4.2 TCP/IP基础

四层模型（由低到高）：

1. 网络接口层（物理层+数据链路层）
2. 网际层（网络层）：IP协议
3. 传输层（传输层）
4. 应用层（会表应）

网络层协议：

1. IP是TCP的基础
2. ARP/RARP：ip转mac和mac转ip
3. ICMP：对组播传输管理协议。对ping进行打包执行

传输层协议：

1. TCP可靠，三次握手确保传输正常
2. UDP随便传不管传输正常不正常

应用层协议：

1. 基于TCP：
2. HTTP（80端口）、
3. TEINET（23、远程协议，明文所以可靠但不安全）、
4. FTP（20上传文件端口/21控制端口）、
5. SMTP（25、邮件相关）、
6. POP3（110、邮件相关）
7. 基于UDP：
8. SNMP（161，简单网络管理协议）、
9. DNS（53、域名解析协议）、
10. TFTP（69，简单文件传输协议）、
11. DHCP（67，自动获取ip）



TCP与UDP对比

共同点：都是基于ip，进行端口寻址

不同点：

1. TCP面向链接，UDP无连接
2. TCP三次握手、流量控制、差错校验、重传、顺序接收，不丢失不重复、可靠性强、牺牲通信量、效率低；UDP无链接、无流量控制、无阻塞控制、有助于提高传输速率、不对无序数据重新排序，不重传、不消除重复、不校验、不终止建立链接，这些由应用程序进行处理



TCP的限流逻辑：在建立连接时根据接收端接收能力双方商定缓冲区大小，发送合适大小的数据，接收端接收后发回确认信息，发送端根据确认信息调整下次发送的窗口大小，所以是 可变大小的滑动窗口



协议应用提升

DHCP：基于C/S类型，

动态分配：客户向服务器申请ip，租约默认8天，租约过半时客户机会重新申请续租，租约超过87.5%如果没有联系上原来的服务器，则寻找新的服务器申请

自动分配：分配一次永久使用

固定分配：每台机器获取的ip固定

设定有两个无效ip:169.254.x.x和0.0.0.0  dns没有理客户端时会返回



DNS协议：输入域名，查hosts（记录域名-ip对应关系）文件,如果找不到则找dns缓存-本地dns服务器-根域名服务器-顶级域名服务器-权限域名服务器

域名服务器接收到域名请求：查本地DNS缓存-根域名服务器。这个不差hosts，注意





