# 2、操作系统

### 2.1 操作系统的作用

自下往上：硬件 - 操作系统（bios也算）- 语言处理程序 （系统软件，比如数据库、开发软件等）- 应用程序（程序开发）

操作系统的作用

1. 管理系统软硬件、数据资源
2. 控制程序运行
3. 人机之间的借口
4. 应用软件与硬件之间的借口



操作系统的任务：

1. 进程管理
2. 存储管理
3. 文件管理
4. 作业管理
5. 设备管理



特殊的操作系统

批处理操作系统：分为单道批和多道批，区别在于一次将一个还是多个作业入内存

分时操作系统：通过轮训形式实现，各个用户感觉独占系统。多路性、独立性、交互性、及时性

实时操作系统：实时控制系统，交互能力不高，可靠性高，要求规定时间内响应并处理

网络操作系统：用于服务器

分布式操作系统：多台计算机可通讯交换信息，是网络操作系统的高级形式

微机操作系统：win10

嵌入式操作系统：运行在智能芯片中。微型化，可定制（根据硬件配置）、实时性、可靠性、易移植性（HAB和BSP支持）





### 2.2 进程与线程

进程：程序在一个数据集合上运行的过程，是系统进行资源分配、调度的基本单位，由程序块、进程控制块（PCB）、数据块三部分组成。

PCB：进程存在的唯一标志，内容包括标识符、状态、控制指针、队列信息（链接同一状态的进程）、优先级、现场保护区等

进程是程序的一次执行过程，程序是静态对的，进程是静态程序运行后的动态的概念

线程（重点）：一个进程中有多个线程，且各个线程共享进程中的资源。其中线程的程序计数器、寄存器、栈独立记录，不会在线程之间共享。



### 2.2.3 进程的状态

三态模型：运行（单处理机处于运行态的进程只有一个）、就绪（除了cpu资源之外的其他资源全部满足。默认资源不可以被剥夺）、等待/阻塞/睡眠（非CPU资源不足时，满足后转换为就绪，不可直接转换为运行）



五态模型：运行、活跃就绪、静止就绪、活跃阻塞、静止阻塞

活跃与静止之间通过挂起操作进行转换；运行、活跃就绪、活跃阻塞与三态一致。静止阻塞满足条件后不激活可直接转换为静止就绪。

挂起的原因：内存不足、系统过程、程序开发断点



### 2.3 进程调度

临近资源：进程间需要互斥方式对其进行共享的资源（进程中访问临近资源的代码成为临界区）

互斥：如千军万马过独木桥。间接制约关系（通过需要共享的资源进行制约）

同步：速度有差异，在一定情况下等待。直接制约关系（快的一定要等待慢的）



PV操作针对非CPU资源

PV操作：P加锁，V解锁。S代表信号量，组成PS（信号量+1）、VS（信号量-1）

PS ： s=s-1;(申请资源)   s<0;（检查是否足够）。s=0时表示刚申请到一个资源满足执行条件 。s<0时进入阻塞队列（阻塞态）























